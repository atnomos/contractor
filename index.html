<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contractor Shoutout Badge Maker</title>
  <style>
    :root {
      --primary: #0066cc;
      --primary-dark: #004c99;
      --text: #1a1a1a;
      --gray: #555;
      --light: #f8f9fa;
      --shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--light);
      color: var(--text);
      margin: 0;
      padding: 24px 16px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .container {
      max-width: 720px;
      width: 100%;
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: 32px 24px;
      margin-bottom: 24px;
    }

    h1 {
      margin: 0 0 16px;
      font-size: 2.1rem;
      color: var(--primary);
      text-align: center;
    }

    .intro {
      color: var(--gray);
      text-align: center;
      margin-bottom: 32px;
      font-size: 1.05rem;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #333;
    }

    input[type="text"],
    textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 1rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0,102,204,0.15);
    }

    textarea {
      min-height: 90px;
      resize: vertical;
    }

    .artwork-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 16px;
      margin: 24px 0;
    }

    .artwork-option {
      text-align: center;
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s;
    }

    .artwork-option input {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .artwork-option label {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 12px;
      border: 2px solid transparent;
      border-radius: 10px;
      background: #f9fafb;
      transition: all 0.2s;
    }

    .artwork-option input:checked + label {
      border-color: var(--primary);
      background: white;
      box-shadow: 0 0 0 3px rgba(0,102,204,0.1);
      transform: scale(1.05);
    }

    .artwork-option img {
      width: 90px;
      height: 90px;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: transform 0.2s;
    }

    .artwork-option:hover img {
      transform: scale(1.08);
    }

    .artwork-option span {
      font-weight: 500;
      font-size: 0.95rem;
      color: #444;
    }

    #preview {
      margin: 32px auto;
      width: 100%;
      max-width: 420px;
      aspect-ratio: 1 / 1;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      overflow: hidden;
      position: relative;
      box-shadow: var(--shadow);
      background: white;
    }

    #bg {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
    }

    #textOverlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      text-align: center;
      padding: 20px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.9);
      pointer-events: none;
    }

    #nameText {
      font: bold 38px Arial, sans-serif;
      margin-bottom: 12px;
      line-height: 1.1;
    }

    #reasonText {
      font: 24px Arial, sans-serif;
      line-height: 1.3;
      max-width: 90%;
    }

    button {
      display: block;
      width: 100%;
      max-width: 320px;
      margin: 24px auto 0;
      padding: 14px 32px;
      background: var(--primary);
      color: white;
      font-size: 1.1rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    button:hover {
      background: var(--primary-dark);
    }

    button:active {
      transform: scale(0.98);
    }

    button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }

    @media (max-width: 500px) {
      .container { padding: 24px 16px; }
      h1 { font-size: 1.8rem; }
      #preview { max-width: 360px; }
      #nameText { font-size: 32px; }
      #reasonText { font-size: 20px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Contractor Shoutout Badge</h1>
    <p class="intro">Create a quick recognition badge â€” fill in the details, pick a style, then download to share on Teams!</p>

    <form id="form">
      <label for="name">Contractor's Name</label>
      <input type="text" id="name" placeholder="e.g. Alex Rivera" required />

      <label for="reason">What are we celebrating?</label>
      <textarea id="reason" rows="3" placeholder="e.g. Outstanding support on the Q4 migration project!" required></textarea>

      <label>Choose a badge style</label>
      <div class="artwork-grid">
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image1" id="image1" checked />
          <label for="image1">
            <img src="images/image1.png" alt="Excellence Badge" />
            <span>Excellence</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image2" id="image2" />
          <label for="image2">
            <img src="images/image2.png" alt="Reliability Badge" />
            <span>Reliability</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image3" id="image3" />
          <label for="image3">
            <img src="images/image3.png" alt="Teamwork Badge" />
            <span>Teamwork</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image4" id="image4" />
          <label for="image4">
            <img src="images/image4.png" alt="Innovation Badge" />
            <span>Innovation</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image5" id="image5" />
          <label for="image5">
            <img src="images/image5.png" alt="Achievement Badge" />
            <span>Achievement</span>
          </label>
        </div>
      </div>

      <button type="button" id="generate">Generate & Download Badge</button>
    </form>

    <div id="preview">
      <img id="bg" src="" alt="Selected badge background" />
      <div id="textOverlay">
        <div id="nameText"></div>
        <div id="reasonText"></div>
      </div>
    </div>
  </div>

  <script>
    const nameInput   = document.getElementById('name');
    const reasonInput = document.getElementById('reason');
    const previewBg   = document.getElementById('bg');
    const nameText    = document.getElementById('nameText');
    const reasonText  = document.getElementById('reasonText');
    const generateBtn = document.getElementById('generate');

    // Live text update
    nameInput.addEventListener('input',   () => nameText.textContent   = nameInput.value.trim());
    reasonInput.addEventListener('input', () => reasonText.textContent = reasonInput.value.trim());

    // Artwork selection + initial load
    document.querySelectorAll('input[name="artwork"]').forEach(radio => {
      radio.addEventListener('change', () => {
        const img = radio.nextElementSibling.querySelector('img');
        previewBg.src = img.src;
      });
    });

    // Set initial background
    const initialImg = document.querySelector('input[name="artwork"]:checked + label img');
    if (initialImg) previewBg.src = initialImg.src;

    // Generate & download
    generateBtn.onclick = () => {
      if (!nameInput.value.trim() || !reasonInput.value.trim()) {
        alert('Please enter both name and celebration reason.');
        return;
      }

      generateBtn.disabled = true;
      generateBtn.textContent = 'Generating...';

      const canvas = document.createElement('canvas');
      canvas.width = 400;
      canvas.height = 400;
      const ctx = canvas.getContext('2d');

      const img = new Image();
      img.crossOrigin = 'anonymous';
      img.src = previewBg.src;

      img.onload = () => {
        ctx.drawImage(img, 0, 0, 400, 400);

        ctx.textAlign = 'center';
        ctx.fillStyle = '#ffffff';
        ctx.shadowColor = 'rgba(0,0,0,0.85)';
        ctx.shadowBlur = 8;
        ctx.shadowOffsetX = 2;
        ctx.shadowOffsetY = 2;

        ctx.font = 'bold 38px Arial, sans-serif';
        ctx.fillText(nameInput.value.trim(), 200, 160);

        ctx.font = '24px Arial, sans-serif';
        ctx.fillText(reasonInput.value.trim(), 200, 220);

        const link = document.createElement('a');
        link.download = `shoutout_${nameInput.value.trim().replace(/\s+/g,'_') || 'badge'}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();

        // Reset button
        generateBtn.disabled = false;
        generateBtn.textContent = 'Generate & Download Badge';
      };

      img.onerror = () => {
        alert('Failed to load the background image. Check file paths or try refreshing.');
        generateBtn.disabled = false;
        generateBtn.textContent = 'Generate & Download Badge';
      };
    };
  </script>
</body>
</html>
