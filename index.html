<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contractor Shoutout Badge Maker</title>
  <style>
    :root {
      --primary: #0066cc;
      --primary-dark: #004c99;
      --text: #ffffff;
      --gray: #c0c0c0;
      --shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    * { box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      color: var(--text);
      margin: 0;
      padding: 24px 16px;
      min-height: 100vh;
      background-attachment: fixed;
      position: relative;
      overflow-x: hidden;
    }

    /* Starry background */
    body::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: 
        radial-gradient(circle at 10% 20%, rgba(255,255,255,0.08) 1px, transparent 1px),
        radial-gradient(circle at 30% 60%, rgba(255,255,255,0.06) 1px, transparent 1px),
        radial-gradient(circle at 70% 40%, rgba(255,255,255,0.07) 1px, transparent 1px),
        radial-gradient(circle at 90% 80%, rgba(255,255,255,0.05) 1px, transparent 1px);
      background-size: 80px 80px, 120px 120px, 100px 100px, 140px 140px;
      pointer-events: none;
      z-index: -1;
      opacity: 0.7;
    }

    .container {
      max-width: 720px;
      width: 100%;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: var(--shadow);
      padding: 32px 24px;
      margin: 0 auto 32px;
    }

    h1 {
      margin: 0 0 16px;
      font-size: 2.4rem;
      color: #ffffff;
      text-align: center;
      text-shadow: 0 2px 10px rgba(0,102,204,0.5);
    }

    .intro {
      color: var(--gray);
      text-align: center;
      margin-bottom: 32px;
      font-size: 1.1rem;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #e0e0e0;
    }

    input[type="text"],
    textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      font-size: 1rem;
      background: rgba(255,255,255,0.05);
      color: white;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0,102,204,0.3);
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    .artwork-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 20px;
      margin: 32px 0;
    }

    .artwork-option {
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .artwork-option input {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .artwork-option label {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      padding: 12px;
      border: 2px solid rgba(255,255,255,0.15);
      border-radius: 12px;
      background: rgba(255,255,255,0.04);
      transition: all 0.25s;
      backdrop-filter: blur(4px);
    }

    .artwork-option input:checked + label {
      border-color: var(--primary);
      background: rgba(0,102,204,0.15);
      box-shadow: 0 0 0 4px rgba(0,102,204,0.25);
      transform: scale(1.08);
    }

    .artwork-option img {
      width: 100px;
      height: 100px;
      object-fit: contain;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      transition: transform 0.25s;
    }

    .artwork-option:hover img {
      transform: scale(1.12);
    }

    .artwork-option span {
      font-weight: 500;
      font-size: 0.95rem;
      color: #e0e0e0;
    }

    #preview {
      margin: 40px auto;
      width: 100%;
      max-width: 440px;
      aspect-ratio: 1 / 1;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 16px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      background: rgba(0,0,0,0.3);
    }

    #bg {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
    }

    #textOverlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      text-align: center;
      padding: 24px;
      text-shadow: 0 3px 12px rgba(0,0,0,0.95);
      pointer-events: none;
    }

    #nameText {
      font: bold 42px Arial, sans-serif;
      margin-bottom: 16px;
      line-height: 1.1;
    }

    #reasonText {
      font: 26px Arial, sans-serif;
      line-height: 1.35;
      max-width: 90%;
    }

    button {
      display: block;
      width: 100%;
      max-width: 340px;
      margin: 32px auto 0;
      padding: 16px 32px;
      background: linear-gradient(135deg, var(--primary), #0077ff);
      color: white;
      font-size: 1.15rem;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.25s;
      box-shadow: 0 6px 20px rgba(0,102,204,0.4);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0,102,204,0.5);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      background: #555;
      cursor: not-allowed;
      box-shadow: none;
    }

    @media (max-width: 520px) {
      .container { padding: 24px 16px; }
      h1 { font-size: 2rem; }
      #preview { max-width: 360px; }
      #nameText { font-size: 34px; }
      #reasonText { font-size: 22px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Contractor Shoutout Badge</h1>
    <p class="intro">Create a quick recognition badge â€” fill in the details, pick a style, then download to share on Teams!</p>

    <form id="form">
      <label for="name">Contractor's Name</label>
      <input type="text" id="name" placeholder="e.g. Alex Rivera" required />

      <label for="reason">What are we celebrating?</label>
      <textarea id="reason" rows="3" placeholder="e.g. Outstanding support on the Q4 migration project!" required></textarea>

      <label>Choose a badge style</label>
      <div class="artwork-grid">
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image1" id="image1" checked />
          <label for="image1">
            <img src="images/image1.png" alt="Excellence Badge" />
            <span>Excellence</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image2" id="image2" />
          <label for="image2">
            <img src="images/image2.png" alt="Reliability Badge" />
            <span>Reliability</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image3" id="image3" />
          <label for="image3">
            <img src="images/image3.png" alt="Teamwork Badge" />
            <span>Teamwork</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image4" id="image4" />
          <label for="image4">
            <img src="images/image4.png" alt="Innovation Badge" />
            <span>Innovation</span>
          </label>
        </div>
        <div class="artwork-option">
          <input type="radio" name="artwork" value="image5" id="image5" />
          <label for="image5">
            <img src="images/image5.png" alt="Achievement Badge" />
            <span>Achievement</span>
          </label>
        </div>
      </div>

      <button type="button" id="generate">Generate & Download Badge</button>
    </form>

    <div id="preview">
      <img id="bg" src="" alt="Selected badge background" />
      <div id="textOverlay">
        <div id="nameText"></div>
        <div id="reasonText"></div>
      </div>
    </div>
  </div>

  <script>
    const nameInput   = document.getElementById('name');
    const reasonInput = document.getElementById('reason');
    const previewBg   = document.getElementById('bg');
    const nameText    = document.getElementById('nameText');
    const reasonText  = document.getElementById('reasonText');
    const generateBtn = document.getElementById('generate');

    // Live text update
    nameInput.addEventListener('input',   () => nameText.textContent   = nameInput.value.trim());
    reasonInput.addEventListener('input', () => reasonText.textContent = reasonInput.value.trim());

    // Artwork selection + initial load
    document.querySelectorAll('input[name="artwork"]').forEach(radio => {
      radio.addEventListener('change', () => {
        const img = radio.nextElementSibling.querySelector('img');
        previewBg.src = img.src;
      });
    });

    // Set initial background
    const initialImg = document.querySelector('input[name="artwork"]:checked + label img');
    if (initialImg) previewBg.src = initialImg.src;

    // Generate & download
    generateBtn.onclick = () => {
      if (!nameInput.value.trim() || !reasonInput.value.trim()) {
        alert('Please enter both name and celebration reason.');
        return;
      }

      generateBtn.disabled = true;
      generateBtn.textContent = 'Generating...';

      const canvas = document.createElement('canvas');
      canvas.width = 400;
      canvas.height = 400;
      const ctx = canvas.getContext('2d');

      const img = new Image();
      img.crossOrigin = 'anonymous';
      img.src = previewBg.src;

      img.onload = () => {
        ctx.drawImage(img, 0, 0, 400, 400);

        ctx.textAlign = 'center';
        ctx.fillStyle = '#ffffff';
        ctx.shadowColor = 'rgba(0,0,0,0.9)';
        ctx.shadowBlur = 10;
        ctx.shadowOffsetX = 3;
        ctx.shadowOffsetY = 3;

        ctx.font = 'bold 42px Arial, sans-serif';
        ctx.fillText(nameInput.value.trim(), 200, 160);

        ctx.font = '26px Arial, sans-serif';
        ctx.fillText(reasonInput.value.trim(), 200, 225);

        const link = document.createElement('a');
        link.download = `shoutout_${nameInput.value.trim().replace(/\s+/g,'_') || 'badge'}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();

        generateBtn.disabled = false;
        generateBtn.textContent = 'Generate & Download Badge';
      };

      img.onerror = () => {
        alert('Failed to load the background image. Check file paths or try refreshing.');
        generateBtn.disabled = false;
        generateBtn.textContent = 'Generate & Download Badge';
      };
    };
  </script>
</body>
</html>
